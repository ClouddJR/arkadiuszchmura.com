<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to display responsive images from Laravel-medialibrary in Vue.js | Arkadiusz Chmura</title><meta name=keywords content><meta name=description content="It&rsquo;s easy to do in a Blade file, but what about a Vue component?"><meta name=author content><link rel=canonical href=https://arkadiuszchmura.com/posts/how-to-display-responsive-image-from-laravel-medialibrary-in-vue-js/><link crossorigin=anonymous href=/assets/css/stylesheet.min.9ba27e3c8c2747e1cde460076c0ca4266a90ef93999b5f361979f681b9f778a6.css integrity="sha256-m6J+PIwnR+HN5GAHbAykJmqQ75OZm182GXn2gbn3eKY=" rel="preload stylesheet" as=style><link rel=icon href=https://arkadiuszchmura.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://arkadiuszchmura.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://arkadiuszchmura.com/favicon-32x32.png><link rel=apple-touch-icon href=https://arkadiuszchmura.com/apple-touch-icon.png><link rel=mask-icon href=https://arkadiuszchmura.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.99.1"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="How to display responsive images from Laravel-medialibrary in Vue.js"><meta property="og:description" content="It&rsquo;s easy to do in a Blade file, but what about a Vue component?"><meta property="og:type" content="article"><meta property="og:url" content="https://arkadiuszchmura.com/posts/how-to-display-responsive-image-from-laravel-medialibrary-in-vue-js/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-29T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-29T00:00:00+00:00"><meta property="og:site_name" content="Arkadiusz Chmura"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to display responsive images from Laravel-medialibrary in Vue.js"><meta name=twitter:description content="It&rsquo;s easy to do in a Blade file, but what about a Vue component?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://arkadiuszchmura.com/posts/"},{"@type":"ListItem","position":2,"name":"How to display responsive images from Laravel-medialibrary in Vue.js","item":"https://arkadiuszchmura.com/posts/how-to-display-responsive-image-from-laravel-medialibrary-in-vue-js/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to display responsive images from Laravel-medialibrary in Vue.js","name":"How to display responsive images from Laravel-medialibrary in Vue.js","description":"It\u0026rsquo;s easy to do in a Blade file, but what about a Vue component?","keywords":[],"articleBody":"Introduction Spatie created an extremely useful library for working with any type of media in Laravel, called Laravel-medialibrary. It allows you to associate all sorts of files with Eloquent models and organize them into collections. It also has a simple fluent API that makes it effortless and pleasant to use.\nAdditionally, the package supports different filesystems (like Amazon S3) and can manipulate all uploaded images or pdfs according to the specified configuration. It’s possible to resize, reformat, apply special effects, and much more. Check out the documentation to learn about everything it can do for you.\nHowever, the feature I like most about this library is that it can automatically create responsive variants of images. The moment you upload an image, the media library will create resized versions of the original image suitable for different screen sizes, as well as a tiny blurred one used for progressive loading (which will be displayed before the full image is ready).\nWhat’s even better, the package has support for generating a necessary HTML markup, automatically creating an img tag and specifying src, srcset, and sizes attributes for you.\nTo display your image in a Blade file, all you have to do is output the Media object:\nh1My blog posth1  {{ $post-getFirstMedia() }} It’s very convenient, isn’t it? But what about Vue? In a component’s template, we can’t just output the object like in a Blade file.\nLuckily, there is a way to make responsive images work in Vue.\nSolution The Media object implements the Htmlable interface, defined as follows:\ninterface Htmlable {  /** * Get content as a string of HTML. * * @return string */  public function toHtml(); } Internally, the Blade compiler will use the toHtml() method when it encounters a Media object while rendering the view.\nThis method is public, so nothing stops us from using it ourselves.\nIn a controller that’s responsible for providing data used by your Vue component, simply return the result of the toHtml() method:\nnamespace App\\Http\\Controllers;  use App\\Http\\Controllers\\Controller;  class PostController extends Controller {  public function show(Post $post)  {  return [ \t'title' = $post-title, \t'content' = $post-content, \t'img' = $post-getFirstMedia()-toHtml() \t];  } } Then, inside your Vue component, output the image using the v-html directive by providing the data received from the controller:\ntemplate \tdiv v-html=\"img\"div template And that’s it! Now, your image should be correctly displayed based on the screen size.\nSummary If you’ve been trying to take advantage of the simplicity of responsive images provided by the media library inside a Vue component, I hope this post saved you some time. If you have some questions, feel free to reach me on Twitter.\n","wordCount":"439","inLanguage":"en","datePublished":"2022-05-29T00:00:00Z","dateModified":"2022-05-29T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://arkadiuszchmura.com/posts/how-to-display-responsive-image-from-laravel-medialibrary-in-vue-js/"},"publisher":{"@type":"Organization","name":"Arkadiusz Chmura","logo":{"@type":"ImageObject","url":"https://arkadiuszchmura.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://arkadiuszchmura.com/ accesskey=h title="Arkadiusz Chmura (Alt + H)">Arkadiusz Chmura</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://arkadiuszchmura.com/archive title=Archive><span>Archive</span></a></li><li><a href=https://arkadiuszchmura.com/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://arkadiuszchmura.com/>Home</a>&nbsp;»&nbsp;<a href=https://arkadiuszchmura.com/posts/>Posts</a></div><h1 class=post-title>How to display responsive images from Laravel-medialibrary in Vue.js</h1><div class=post-meta><span title="2022-05-29 00:00:00 +0000 UTC">May 29, 2022</span>&nbsp;·&nbsp;3 min</div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p><a href=https://spatie.be/>Spatie</a> created an extremely useful library for working with any type of media in Laravel, called <a href=https://github.com/spatie/laravel-medialibrary><code>Laravel-medialibrary</code></a>. It allows you to associate all sorts of files with Eloquent models and organize them into collections. It also has a simple fluent API that makes it effortless and pleasant to use.</p><p>Additionally, the package supports different filesystems (like Amazon S3) and can manipulate all uploaded images or pdfs according to the specified configuration. It&rsquo;s possible to resize, reformat, apply special effects, and much more. Check out the <a href=https://spatie.be/docs/laravel-medialibrary>documentation</a> to learn about everything it can do for you.</p><p>However, the feature I like most about this library is that it can automatically create responsive variants of images. The moment you upload an image, the media library will create resized versions of the original image suitable for different screen sizes, as well as a tiny blurred one used for progressive loading (which will be displayed before the full image is ready).</p><p>What&rsquo;s even better, the package has support for generating a necessary HTML markup, automatically creating an <code>img</code> tag and specifying <code>src</code>, <code>srcset</code>, and <code>sizes</code> attributes for you.</p><p>To display your image in a Blade file, all you have to do is output the <code>Media</code> object:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#ff79c6>h1</span>&gt;My blog post&lt;/<span style=color:#ff79c6>h1</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{ $post-&gt;getFirstMedia() }}
</span></span></code></pre></div><p>It&rsquo;s very convenient, isn&rsquo;t it? But what about Vue? In a component&rsquo;s template, we can&rsquo;t just output the object like in a Blade file.</p><p>Luckily, there is a way to make responsive images work in Vue.</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><p>The <code>Media</code> object implements the <code>Htmlable</code> interface, defined as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>interface</span> Htmlable
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * Get content as a string of HTML.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return string
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>toHtml</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Internally, the Blade compiler will use the <code>toHtml()</code> method when it encounters a <code>Media</code> object while rendering the view.</p><p>This method is public, so nothing stops us from using it ourselves.</p><p>In a controller that&rsquo;s responsible for providing data used by your Vue component, simply return the result of the <code>toHtml()</code> method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Http\Controllers;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> App\Http\Controllers\Controller;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>PostController</span> <span style=color:#ff79c6>extends</span> Controller
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>show</span>(Post <span style=color:#8be9fd;font-style:italic>$post</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> [
</span></span><span style=display:flex><span>			<span style=color:#f1fa8c>&#39;title&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#8be9fd;font-style:italic>$post</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>title</span>,
</span></span><span style=display:flex><span>			<span style=color:#f1fa8c>&#39;content&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#8be9fd;font-style:italic>$post</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>content</span>,
</span></span><span style=display:flex><span>			<span style=color:#f1fa8c>&#39;img&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#8be9fd;font-style:italic>$post</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getFirstMedia</span>()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>toHtml</span>()
</span></span><span style=display:flex><span>		];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, inside your Vue component, output the image using the <code>v-html</code> directive by providing the data received from the controller:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#ff79c6>template</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#ff79c6>div</span> <span style=color:#ff79c6>v-html</span><span style=color:#f1fa8c>=&#34;img&#34;</span>&gt;&lt;/<span style=color:#ff79c6>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#ff79c6>template</span>&gt;
</span></span></code></pre></div><p>And that&rsquo;s it! Now, your image should be correctly displayed based on the screen size.</p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>If you&rsquo;ve been trying to take advantage of the simplicity of responsive images provided by the media library inside a Vue component, I hope this post saved you some time. If you have some questions, feel free to reach me on <a href=https://twitter.com/ClouddJR/>Twitter</a>.</p></div><footer class=post-footer><nav class=paginav><a class=next href=https://arkadiuszchmura.com/posts/how-viewmodels-survive-configuration-changes/><span class=title>Next Page »</span><br><span>How ViewModels survive configuration changes</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://arkadiuszchmura.com/>Arkadiusz Chmura</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>