<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to change system bar colors using Jetpack Compose | Arkadiusz Chmura</title><meta name=keywords content><meta name=description content="System bar colors can be changed directly with Compose, without a need to modify any XML files."><meta name=author content><link rel=canonical href=https://arkadiuszchmura.com/posts/how-to-change-system-bar-colors-in-compose/><link crossorigin=anonymous href=/assets/css/stylesheet.min.9d249d2edf9a65d7390ed9afa994136e57a52e65fe012ae96bdee2af3a40ff54.css integrity="sha256-nSSdLt+aZdc5DtmvqZQTblelLmX+ASrpa97irzpA/1Q=" rel="preload stylesheet" as=style><link rel=icon href=https://arkadiuszchmura.com/favicon.ico><link rel=apple-touch-icon href=https://arkadiuszchmura.com/apple-touch-icon.png><meta name=twitter:title content="How to change system bar colors using Jetpack Compose | Arkadiusz Chmura"><meta name=twitter:description content="System bar colors can be changed directly with Compose, without a need to modify any XML files."><meta property="og:title" content="How to change system bar colors using Jetpack Compose | Arkadiusz Chmura"><meta property="og:description" content="System bar colors can be changed directly with Compose, without a need to modify any XML files."><meta property="og:type" content="article"><meta property="og:url" content="https://arkadiuszchmura.com/posts/how-to-change-system-bar-colors-in-compose/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-20T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-20T00:00:00+00:00"><meta property="og:site_name" content="Arkadiusz Chmura"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://arkadiuszchmura.com/posts/"},{"@type":"ListItem","position":2,"name":"How to change system bar colors using Jetpack Compose","item":"https://arkadiuszchmura.com/posts/how-to-change-system-bar-colors-in-compose/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to change system bar colors using Jetpack Compose | Arkadiusz Chmura","name":"How to change system bar colors using Jetpack Compose","description":"System bar colors can be changed directly with Compose, without a need to modify any XML files.","keywords":[],"wordCount":"648","inLanguage":"en","datePublished":"2022-07-20T00:00:00Z","dateModified":"2022-07-20T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://arkadiuszchmura.com/posts/how-to-change-system-bar-colors-in-compose/"},"publisher":{"@type":"Organization","name":"Arkadiusz Chmura","logo":{"@type":"ImageObject","url":"https://arkadiuszchmura.com/favicon.ico"}}}</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel=stylesheet><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="light",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://arkadiuszchmura.com/ accesskey=h title="Arkadiusz Chmura (Alt + H)">Arkadiusz Chmura</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://arkadiuszchmura.com/archive/ title=Archive>Archive</a></li><li><a href=https://arkadiuszchmura.com/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://arkadiuszchmura.com/>Home</a>&nbsp;»&nbsp;<a href=https://arkadiuszchmura.com/posts/>Posts</a></div><h1 class=post-title>How to change system bar colors using Jetpack Compose</h1><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>July 20, 2022</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>4 min</span></span></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>¶</a></h2><p>In this post, I would like to show you how you can change the status bar and navigation bar colors using Compose, without having to modify any XML files.</p><p>Before Jetpack Compose, to specify the bar colors, we would traditionally modify the <code>themes.xml</code> file like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;resources&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;style</span> <span class=na>name=</span><span class=s>&#34;Theme.BarColors&#34;</span> <span class=na>parent=</span><span class=s>&#34;android:Theme.Material.Light.NoActionBar&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&#34;android:statusBarColor&#34;</span><span class=nt>&gt;</span>@color/purple_700<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&#34;android:navigationBarColor&#34;</span><span class=nt>&gt;</span>@color/purple_700<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/style&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/resources&gt;</span>
</span></span></code></pre></div><p>As you can guess, the <code>android:statusBarColor</code> and <code>android:navigationBarColor</code> attributes affect the status bar color and navigation bar color, respectively.</p><p>Additionally, we could specify <code>android:windowLightStatusBar</code> (to make the icons on the status bar dark) or <code>android:windowLightNavigationBar</code> (similarly for navigation bar). Unfortunately, the latter requires API level 27. It forces us to override this attribute in another <code>themes.xml</code> file under the <code>values-27</code> folder. It can lead to quite a messy structure when we have a lot of attributes like this. It can get even worse when we decide to support a dark theme.</p><p>Luckily, with Compose, there is another way of doing this.</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>¶</a></h2><p>For this example, I created a simple screen using Compose that displays centered text on a <code>Surface</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>class</span> <span class=nc>MainActivity</span> <span class=p>:</span> <span class=n>ComponentActivity</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>:</span> <span class=n>Bundle</span><span class=p>?)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>super</span><span class=p>.</span><span class=n>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>        <span class=n>setContent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>BarColorsTheme</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Surface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>Text</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                        <span class=n>modifier</span> <span class=p>=</span> <span class=n>Modifier</span>
</span></span><span class=line><span class=cl>                            <span class=p>.</span><span class=n>fillMaxSize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=p>.</span><span class=n>wrapContentHeight</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                        <span class=n>textAlign</span> <span class=p>=</span> <span class=nc>TextAlign</span><span class=p>.</span><span class=n>Center</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>style</span> <span class=p>=</span> <span class=nc>MaterialTheme</span><span class=p>.</span><span class=n>typography</span><span class=p>.</span><span class=n>h3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>text</span> <span class=p>=</span> <span class=s2>&#34;Hello Android!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>BarColorsTheme</code> (where <code>BarColors</code> is the name of the app) that wraps everything is a composable function that is created for you when you use the <code>Empty Compose Activity</code> template from the project wizard:</p><figure class=align-center><img loading=lazy src=/compose-wizard.png#center alt="Android Studio&amp;rsquo;s new project wizard"><figcaption><p>Android Studio&rsquo;s new project wizard</p></figcaption></figure><p>This is what it looks like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>private</span> <span class=k>val</span> <span class=py>DarkColorPalette</span> <span class=p>=</span> <span class=n>darkColors</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>primary</span> <span class=p>=</span> <span class=n>Purple200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>primaryVariant</span> <span class=p>=</span> <span class=n>Purple700</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>secondary</span> <span class=p>=</span> <span class=n>Teal200</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>val</span> <span class=py>LightColorPalette</span> <span class=p>=</span> <span class=n>lightColors</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>primary</span> <span class=p>=</span> <span class=n>Purple500</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>primaryVariant</span> <span class=p>=</span> <span class=n>Purple700</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>secondary</span> <span class=p>=</span> <span class=n>Teal200</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Composable</span>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>BarColorsTheme</span><span class=p>(</span><span class=n>darkTheme</span><span class=p>:</span> <span class=n>Boolean</span> <span class=p>=</span> <span class=n>isSystemInDarkTheme</span><span class=p>(),</span> <span class=n>content</span><span class=p>:</span> <span class=nd>@Composable</span> <span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Unit</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>colors</span> <span class=p>=</span> <span class=k>if</span> <span class=p>(</span><span class=n>darkTheme</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DarkColorPalette</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LightColorPalette</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>MaterialTheme</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>colors</span> <span class=p>=</span> <span class=n>colors</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>typography</span> <span class=p>=</span> <span class=n>Typography</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>shapes</span> <span class=p>=</span> <span class=n>Shapes</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>content</span> <span class=p>=</span> <span class=n>content</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>BarColorsTheme</code> serves as a root composable that specifies the proper color palette (based on whether the dark theme is enabled), typography, and shapes for the entire hierarchy.</p><p>Because it is a root composable in our app, we can use this place to specify the system bar colors. Here is how we can do that:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=nd>@Composable</span>  
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>BarColorsTheme</span><span class=p>(</span><span class=n>darkTheme</span><span class=p>:</span> <span class=n>Boolean</span> <span class=p>=</span> <span class=n>isSystemInDarkTheme</span><span class=p>(),</span> <span class=n>content</span><span class=p>:</span> <span class=nd>@Composable</span> <span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Unit</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>val</span> <span class=py>view</span> <span class=p>=</span> <span class=nc>LocalView</span><span class=p>.</span><span class=n>current</span>  
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(!</span><span class=n>view</span><span class=p>.</span><span class=n>isInEditMode</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>SideEffect</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>            <span class=k>val</span> <span class=py>window</span> <span class=p>=</span> <span class=p>(</span><span class=n>view</span><span class=p>.</span><span class=n>context</span> <span class=k>as</span> <span class=n>Activity</span><span class=p>).</span><span class=n>window</span>  
</span></span><span class=line><span class=cl>            <span class=n>window</span><span class=p>.</span><span class=n>statusBarColor</span> <span class=p>=</span> <span class=n>colors</span><span class=p>.</span><span class=n>primary</span><span class=p>.</span><span class=n>toArgb</span><span class=p>()</span>  
</span></span><span class=line><span class=cl>            <span class=n>window</span><span class=p>.</span><span class=n>navigationBarColor</span> <span class=p>=</span> <span class=n>colors</span><span class=p>.</span><span class=n>primary</span><span class=p>.</span><span class=n>toArgb</span><span class=p>()</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>            <span class=nc>WindowCompat</span><span class=p>.</span><span class=n>getInsetsController</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=n>view</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>isAppearanceLightStatusBars</span> <span class=p>=</span> <span class=n>darkTheme</span>  
</span></span><span class=line><span class=cl>            <span class=nc>WindowCompat</span><span class=p>.</span><span class=n>getInsetsController</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=n>view</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>isAppearanceLightNavigationBars</span> <span class=p>=</span> <span class=n>darkTheme</span>  
</span></span><span class=line><span class=cl>        <span class=p>}</span>  
</span></span><span class=line><span class=cl>    <span class=p>}</span>  
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>We use the <code>window</code> object associated with our activity and modify the appropriate properties - <code>statusBarColor</code> and <code>navigationBarColor</code>. We use a primary color from the current palette (in this case it&rsquo;s a shade of purple).</p><p>Additionally, we use <code>WindowCompat</code> to make the status bar and navigation bar icons light or dark, depending on the value of the <code>darkTheme</code> variable. A nice benefit of using <code>WindowCompat</code> is that we don&rsquo;t have to check the API level before executing those methods. Behind the scenes, they will have no effect on unsupported APIs.</p><p>After making those changes and running the app, we get the desired effect:</p><figure class=align-center><img loading=lazy src=/bar-colors-light.png#center alt="System bar colors changed with Compose" width=350><figcaption><p>System bar colors changed with Compose</p></figcaption></figure><p>Notice the use of <code>SideEffect</code> here. A <code>SideEffect</code> runs after <strong>every</strong> recomposition. Thanks to this, the system bar colors will be automatically updated to correct values when a user enables the dark theme, without having to reopen the app:</p><figure class=align-center><img loading=lazy src=/bar-colors-change.gif#center alt="System bar colors adapting to the current theme" width=350><figcaption><p>System bar colors adapting to the current theme</p></figcaption></figure><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>¶</a></h2><p>With Jetpack Compose, specifying system bar colors that adapt to the current theme is quite simple. All of the relevant code sits in one place. We no longer have to create different <code>themes.xml</code> files and override specific attributes.</p><p>I hope you found this post interesting. If you have any questions, feel free to reach me on <a href=https://twitter.com/ClouddJR/>Twitter</a>.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://arkadiuszchmura.com/posts/what-is-the-difference-between-size-and-viewport-size-in-vector-drawables/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>What is the difference between size and viewport size in vector drawables?</span></a>
<a class=next href=https://arkadiuszchmura.com/posts/how-twitter-handled-personalized-timelines-for-their-users/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>How Twitter handled personalized timelines for their users</span></a></nav></footer></article></main><footer class=footer><span></span>
<span>&copy; 2023 <a href=https://arkadiuszchmura.com/>Arkadiusz Chmura</a></span></footer><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a=""=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script>mediumZoom(".entry-cover img"),mediumZoom(".post-content img:not([no-zoom])")</script></body></html>